<%- contentFor('body') %>

<h4>Atendimento</h4>
<div class="row">
  <div class="col">
  
  </div>

  <div class="fixed-bottom">
    <button type="button" class="btn btn-primary bmd-btn-fab" id="btnCamera">
      <i class="material-icons">camera</i>
    </button>
  </div>


<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <video muted  id="qr-video"></video>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>

  
</div>


<script type="module">
import QrScanner from './javascripts/qr-scanner.min.js';
QrScanner.WORKER_PATH='./javascripts/qr-scanner-worker.min.js';
const video=document.getElementById('qr-video');

const btnCamera=document.getElementById('btnCamera');
  //QrScanner.hasCamera().then(hasCamera => camHasCamera.textContent = hasCamera);

  //const scanner = new QrScanner(video, result => console.log('decoded qr code:', result));
 btnCamera.addEventListener('click',()=>{
  
    $('#mymodal').modal('show');

    const scanner = new QrScanner(video, result => {
        alert(result);
      });
      
     // scanner.start();
  })
     
      


</script>
